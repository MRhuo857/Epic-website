(this["webpackJsonpreact-epic"]=this["webpackJsonpreact-epic"]||[]).push([[2],{101:function(e,t,n){e.exports=n(138)},106:function(e,t,n){},138:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),i=n(11),a=n.n(i),c=(n(106),n(17)),u=n(140),l=n(41),s=n(7),p=n(18),f=n(68),b=n(71);function m(){var e=Object(c.a)(["\n  margin: 0 10px;\n"]);return m=function(){return e},e}function y(){var e=Object(c.a)(["\n  margin-left: auto;\n"]);return y=function(){return e},e}function h(){var e=Object(c.a)(["\n  color: #fff;\n  margin-left: 30px;\n\n  &.active {\n    border-bottom: 1px solid dodgerblue;\n    color:dodgerblue;\n  }\n"]);return h=function(){return e},e}function O(){var e=Object(c.a)(["\n  display: flex;\n  align-items: center;\n  padding: 10px 100px;\n  background-color: rgb(52,58,64);\n  color: #fff;\n"]);return O=function(){return e},e}var g=p.a.header(O()),j=Object(p.a)(l.b)(h()),v=p.a.div(y()),d=Object(p.a)(u.a)(m()),w=Object(b.a)((function(){var e=Object(f.a)(),t=e.UserStore,n=e.AuthStore,i=Object(s.f)();Object(r.useEffect)((function(){t.pullUser()}),[]);return o.a.createElement(g,null,o.a.createElement("nav",null,o.a.createElement(j,{to:"/",activeClassName:"active",exact:!0},"\u9996\u9875"),o.a.createElement(j,{to:"/history",activeClassName:"active"},"\u4e0a\u4f20\u5386\u53f2"),o.a.createElement(j,{to:"/about",activeClassName:"active"},"\u5173\u4e8e\u6211")),o.a.createElement(v,null,t.currentUser?o.a.createElement(o.a.Fragment,null,t.currentUser.attributes.username,o.a.createElement(d,{type:"primary",onClick:function(){n.logout()}},"\u6ce8\u9500")):o.a.createElement(o.a.Fragment,null,o.a.createElement(d,{type:"primary",onClick:function(){i.push("/login")}},"\u767b\u5f55"),o.a.createElement(d,{type:"primary",onClick:function(){i.push("/register")}},"\u6ce8\u518c"))))}));function U(){var e=Object(c.a)(["\n  padding:10px 100px;\n  text-align:center;\n  color:#666;\n  font-size:12px;\n  background: #eee;\n"]);return U=function(){return e},e}var E=p.a.footer(U());var P=function(){return o.a.createElement(E,null,o.a.createElement("div",null,o.a.createElement("span",null,"\u8bf7\u52ff\u4e0a\u4f20\u8fdd\u53cd\u4e2d\u56fd\u5927\u9646\u548c\u9999\u6e2f\u6cd5\u5f8b\u7684\u56fe\u7247\uff0c\u8fdd\u8005\u540e\u679c\u81ea\u8d1f\u3002")))},k=n(141);function z(){var e=Object(c.a)(["\n display: flex;\n justify-content: center;\n align-items: center;\n"]);return z=function(){return e},e}var x=p.a.div(z());var F=function(){return o.a.createElement(x,null,o.a.createElement(k.a,{tip:"\u52a0\u8f7d\u4e2d"}))},D=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(6),n.e(9)]).then(n.bind(null,324))})),L=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(5),n.e(8)]).then(n.bind(null,325))})),S=Object(r.lazy)((function(){return n.e(7).then(n.bind(null,316))})),C=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(10)]).then(n.bind(null,317))})),I=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(11)]).then(n.bind(null,318))}));var A=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(w,null),o.a.createElement("main",null,o.a.createElement(r.Suspense,{fallback:o.a.createElement(F,null)},o.a.createElement(s.c,null,o.a.createElement(s.a,{path:"/",exact:!0,component:D}),o.a.createElement(s.a,{path:"/history",component:L}),o.a.createElement(s.a,{path:"/about",component:S}),o.a.createElement(s.a,{path:"/login",component:C}),o.a.createElement(s.a,{path:"/register",component:I})))),o.a.createElement(P,null))};n(137),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(o.a.createElement(l.a,null,o.a.createElement(A,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},68:function(e,t,n){"use strict";n.d(t,"a",(function(){return J}));var r=n(0),o=n(12),i=n(26),a=n(27),c=n(5),u=(n(50),n(1)),l=n(15),s=n.n(l);s.a.init({appId:"oIAVQHGu3k80ou8msKitpx6k-gzGzoHsz",appKey:"C2x8avjcpLr2Jyp2F0AuJBg5",serverURL:"https://oiavqhgu.lc-cn-n1-shared.com"});var p,f,b,m,y,h,O,g,j,v,d,w,U,E,P=function(e,t){var n=new l.User;return n.setUsername(e),n.setPassword(t),new Promise((function(e,t){n.signUp().then((function(t){return e(t)}),(function(e){return t(e)}))}))},k=function(e,t){return new Promise((function(n,r){l.User.logIn(e,t).then((function(e){return n(e)}),(function(e){return r(e)}))}))},z=function(){l.User.logOut()},x=function(){return l.User.current()},F=function(e,t){var n=new s.a.Object("Image"),r=new s.a.File(t,e);return n.set("filename",t),n.set("owner",s.a.User.current()),n.set("url",r),new Promise((function(e,t){n.save().then((function(t){return e(t)}),(function(e){return t(e)}))}))},D=function(e){var t=e.page,n=void 0===t?0:t,r=e.limit,o=void 0===r?10:r,i=new s.a.Query("Image");return i.include("owner"),i.limit(o),i.skip(n*o),i.descending("createdAt"),i.equalTo("owner",s.a.User.current()),new Promise((function(e,t){i.find().then((function(t){return e(t)})).catch((function(e){return t(e)}))}))},L=new(p=function(){function e(){Object(i.a)(this,e),Object(o.a)(this,"currentUser",f,this),Object(u.m)(this)}return Object(a.a)(e,[{key:"pullUser",value:function(){this.currentUser=x()}},{key:"resetUser",value:function(){this.currentUser=null}}]),e}(),f=Object(c.a)(p.prototype,"currentUser",[u.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(c.a)(p.prototype,"pullUser",[u.f],Object.getOwnPropertyDescriptor(p.prototype,"pullUser"),p.prototype),Object(c.a)(p.prototype,"resetUser",[u.f],Object.getOwnPropertyDescriptor(p.prototype,"resetUser"),p.prototype),p),S=n(143),C=new(b=function(){function e(){Object(i.a)(this,e),Object(o.a)(this,"list",m,this),Object(o.a)(this,"isLoading",y,this),Object(o.a)(this,"hasMore",h,this),Object(o.a)(this,"page",O,this),this.limit=10,Object(u.m)(this)}return Object(a.a)(e,[{key:"append",value:function(e){this.list=this.list.concat(e)}},{key:"find",value:function(){var e=this;this.isLoading=!0,D({page:this.page,limit:this.limit}).then((function(t){e.append(t),e.page++,t.length<e.limit&&(e.hasMore=!1)})).catch((function(e){S.b.error("\u52a0\u8f7d\u6570\u636e\u5931\u8d25")})).finally((function(){e.isLoading=!1}))}},{key:"reset",value:function(){this.list=[],this.isLoading=!1,this.hasMore=!0,this.page=0}}]),e}(),m=Object(c.a)(b.prototype,"list",[u.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),y=Object(c.a)(b.prototype,"isLoading",[u.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),h=Object(c.a)(b.prototype,"hasMore",[u.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),O=Object(c.a)(b.prototype,"page",[u.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Object(c.a)(b.prototype,"append",[u.f],Object.getOwnPropertyDescriptor(b.prototype,"append"),b.prototype),Object(c.a)(b.prototype,"find",[u.f],Object.getOwnPropertyDescriptor(b.prototype,"find"),b.prototype),Object(c.a)(b.prototype,"reset",[u.f],Object.getOwnPropertyDescriptor(b.prototype,"reset"),b.prototype),b),I=new(g=function(){function e(){Object(i.a)(this,e),Object(o.a)(this,"filename",j,this),Object(o.a)(this,"file",v,this),Object(o.a)(this,"isLoading",d,this),Object(o.a)(this,"serverFile",w,this),Object(u.m)(this)}return Object(a.a)(e,[{key:"setFilename",value:function(e){this.filename=e}},{key:"setFile",value:function(e){this.file=e}},{key:"upload",value:function(){var e=this;return this.isLoading=!0,this.serverFile=null,new Promise((function(t,n){F(e.file,e.filename).then((function(n){e.serverFile=n,t(n)})).catch((function(e){console.error("\u4e0a\u4f20\u5931\u8d25"),S.b.warning("\u4e0a\u4f20\u5931\u8d25"),n(e)})).finally((function(){e.isLoading=!1}))}))}},{key:"reset",value:function(){this.isLoading=!1,this.serverFile=null}}]),e}(),j=Object(c.a)(g.prototype,"filename",[u.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),v=Object(c.a)(g.prototype,"file",[u.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=Object(c.a)(g.prototype,"isLoading",[u.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),w=Object(c.a)(g.prototype,"serverFile",[u.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(c.a)(g.prototype,"setFilename",[u.f],Object.getOwnPropertyDescriptor(g.prototype,"setFilename"),g.prototype),Object(c.a)(g.prototype,"setFile",[u.f],Object.getOwnPropertyDescriptor(g.prototype,"setFile"),g.prototype),Object(c.a)(g.prototype,"upload",[u.f],Object.getOwnPropertyDescriptor(g.prototype,"upload"),g.prototype),Object(c.a)(g.prototype,"reset",[u.f],Object.getOwnPropertyDescriptor(g.prototype,"reset"),g.prototype),g),A=new(U=function(){function e(){Object(i.a)(this,e),Object(o.a)(this,"values",E,this),Object(u.m)(this)}return Object(a.a)(e,[{key:"setUsername",value:function(e){this.values.username=e}},{key:"setPassword",value:function(e){this.values.password=e}},{key:"login",value:function(){var e=this;return new Promise((function(t,n){k(e.values.username,e.values.password).then((function(e){L.pullUser(),t(e)})).catch((function(e){L.resetUser(),S.b.error("\u767b\u5f55\u5931\u8d25"),n(e)}))}))}},{key:"register",value:function(){var e=this;return new Promise((function(t,n){P(e.values.username,e.values.password).then((function(e){L.pullUser(),t(e)})).catch((function(e){L.resetUser(),S.b.error("\u6ce8\u518c\u5931\u8d25"),n(e)}))}))}},{key:"logout",value:function(){z(),L.resetUser(),C.reset(),I.reset()}}]),e}(),E=Object(c.a)(U.prototype,"values",[u.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{username:"",password:""}}}),Object(c.a)(U.prototype,"setUsername",[u.f],Object.getOwnPropertyDescriptor(U.prototype,"setUsername"),U.prototype),Object(c.a)(U.prototype,"setPassword",[u.f],Object.getOwnPropertyDescriptor(U.prototype,"setPassword"),U.prototype),Object(c.a)(U.prototype,"login",[u.f],Object.getOwnPropertyDescriptor(U.prototype,"login"),U.prototype),Object(c.a)(U.prototype,"register",[u.f],Object.getOwnPropertyDescriptor(U.prototype,"register"),U.prototype),Object(c.a)(U.prototype,"logout",[u.f],Object.getOwnPropertyDescriptor(U.prototype,"logout"),U.prototype),U),H=Object(r.createContext)({AuthStore:A,UserStore:L,ImageStore:I,HistoryStore:C});window.stores={AuthStore:A,UserStore:L,ImageStore:I,HistoryStore:C};var J=function(){return Object(r.useContext)(H)}}},[[101,3,4]]]);
//# sourceMappingURL=main.fe756b80.chunk.js.map