{"version":3,"sources":["components/HistoryList.js","pages/History.js"],"names":["Img","styled","img","Title","div","SpinWrapper","HistoryList","observer","HistoryStore","useStores","useEffect","console","log","reset","initialLoad","pageStart","loadMore","find","hasMore","isLoading","useWindow","dataSource","list","renderItem","item","Item","key","id","src","attributes","url","alt","filename","target","href","tip","History"],"mappings":"8jBAOA,IAAMA,EAAMC,IAAOC,IAAV,KAKHC,EAAQF,IAAOG,IAAV,KAGLC,EAAYJ,IAAOG,IAAR,KAuDFE,EAlDKC,aAAS,WAAO,IAC3BC,EAAgBC,cAAhBD,aAaP,OATAE,qBAAU,WAER,OAAO,WACLC,QAAQC,IAAI,gBACZJ,EAAaK,WAEd,IAID,6BACE,kBAAC,IAAD,CACEC,aAAa,EACbC,UAAW,EACXC,SAjBW,WACfR,EAAaS,QAiBTC,SAAUV,EAAaW,WAAaX,EAAaU,QACjDE,WAAW,GAEX,kBAAC,IAAD,CACEC,WAAYb,EAAac,KACzBC,WACE,SAAAC,GAAI,OAAI,kBAAC,IAAKC,KAAN,CAAWC,IAAKF,EAAKG,IAC3B,6BACE,kBAAC3B,EAAD,CAAK4B,IAAKJ,EAAKK,WAAWC,IAAID,WAAWC,IAAKC,IAAI,MAEpD,kBAAC5B,EAAD,KACE,4BAAKqB,EAAKK,WAAWG,WAEvB,6BACE,uBAAGC,OAAO,SAAUC,KAAMV,EAAKK,WAAWC,IAAID,WAAWC,KAAzD,oBAMLtB,EAAaW,WAAaX,EAAaU,SACtC,kBAACb,EAAD,KACE,kBAAC,IAAD,CAAM8B,IAAI,8BCrDTC,UAPD,WACZ,OACE,6BACE,kBAAC,EAAD","file":"static/js/8.4f687674.chunk.js","sourcesContent":["import React, {useEffect} from \"react\";\r\nimport {observer} from 'mobx-react'\r\nimport InfiniteScroll from 'react-infinite-scroller'\r\nimport {useStores} from \"../stores\";\r\nimport {List, Spin} from \"antd\";\r\nimport styled from 'styled-components'\r\n\r\nconst Img = styled.img`\r\n  max-width: 100px;\r\n  object-fit: contain;\r\n  border: 1px solid #eee;\r\n`\r\nconst Title = styled.div`\r\n color: #666;\r\n`\r\nconst SpinWrapper=styled.div`\r\n display: flex;\r\n justify-content: center;\r\n align-items: center;\r\n`\r\nconst HistoryList = observer(() => {\r\n  const {HistoryStore} = useStores()\r\n  const loadMore = () => {\r\n    HistoryStore.find()\r\n  }\r\n  useEffect(() => {\r\n\r\n    return () => {\r\n      console.log('卸载')\r\n      HistoryStore.reset();\r\n    }\r\n  }, []);\r\n\r\n\r\n  return (\r\n    <div>\r\n      <InfiniteScroll\r\n        initialLoad={true}\r\n        pageStart={0}\r\n        loadMore={loadMore}\r\n        hasMore={!HistoryStore.isLoading && HistoryStore.hasMore}\r\n        useWindow={true}\r\n      >\r\n        <List\r\n          dataSource={HistoryStore.list}\r\n          renderItem={\r\n            item => <List.Item key={item.id}>\r\n              <div>\r\n                <Img src={item.attributes.url.attributes.url} alt=\"\"/>\r\n              </div>\r\n              <Title>\r\n                <h3>{item.attributes.filename}</h3>\r\n              </Title>\r\n              <div>\r\n                <a target=\"_blank\"  href={item.attributes.url.attributes.url}>预览</a>\r\n              </div>\r\n            </List.Item>\r\n\r\n          }\r\n        >\r\n          {HistoryStore.isLoading && HistoryStore.hasMore && (\r\n            <SpinWrapper>\r\n              <Spin tip=\"加载中\"/>\r\n            </SpinWrapper>\r\n          )}\r\n        </List>\r\n      </InfiniteScroll>\r\n    </div>\r\n  )\r\n})\r\nexport default HistoryList","import React from \"react\";\r\nimport HistoryList from \"../components/HistoryList\";\r\nconst History=()=> {\r\n  return (\r\n    <div>\r\n      <HistoryList/>\r\n    </div>\r\n  )\r\n}\r\nexport default History"],"sourceRoot":""}