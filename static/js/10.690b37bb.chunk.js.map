{"version":3,"sources":["pages/Login.js"],"names":["Wrapper","styled","div","FormWrapper","Title","h1","layout","labelCol","span","wrapperCol","tailLayout","offset","Login","AuthStore","useStores","history","useHistory","name","initialValues","remember","onFinish","values","setUsername","username","setPassword","password","login","then","console","log","push","catch","e","message","error","onFinishFailed","errorInfo","Item","label","rules","required","validator","rule","value","test","Promise","reject","length","resolve","min","max","Password","type","htmlType"],"mappings":"omBAOA,IAAMA,EAAUC,IAAOC,IAAV,KAMPC,EAAcF,IAAOC,IAAV,KAGXE,EAAQH,IAAOI,GAAV,KAILC,EAAS,CACbC,SAAU,CAACC,KAAM,GACjBC,WAAY,CAACD,KAAM,KAEfE,EAAa,CACjBD,WAAY,CAACE,OAAQ,EAAGH,KAAM,KA+EjBI,UA7ED,WAAO,IACZC,EAAWC,cAAXD,UACHE,EAAUC,cAsBd,OACE,kBAAChB,EAAD,KACE,kBAACI,EAAD,qBACA,kBAACD,EAAD,KACE,kBAAC,IAAD,iBACMG,EADN,CAEEW,KAAK,QACLC,cAAe,CAACC,UAAU,GAC1BC,SA7BS,SAAAC,GACfR,EAAUS,YAAYD,EAAOE,UAC7BV,EAAUW,YAAYH,EAAOI,UAC7BZ,EAAUa,QACPC,MAAK,WACJC,QAAQC,IAAI,4BACZd,EAAQe,KAAK,QACZC,OAAM,SAACC,GACRJ,QAAQC,IAAIG,GACdC,IAAQC,MAAM,8GAqBVC,eAjBe,SAAAC,GACrBR,QAAQC,IAAI,UAAWO,MAkBjB,kBAAC,IAAKC,KAAN,CACEC,MAAM,qBACNrB,KAAK,WACLsB,MACE,CACE,CAACC,UAAU,EAAMP,QAAS,yCAC1B,CAACQ,UAtBU,SAACC,EAAMC,GAC9B,MAAI,KAAKC,KAAKD,GAAeE,QAAQC,OAAO,4EACxCH,EAAMI,OAAS,GAAKJ,EAAMI,OAAS,GAAWF,QAAQC,OAAO,4CAC1DD,QAAQG,cAuBP,kBAAC,IAAD,OAGF,kBAAC,IAAKX,KAAN,CACEC,MAAM,eACNrB,KAAK,WACLsB,MAAO,CACL,CAACC,UAAU,EAAMP,QAAS,kCAC1B,CACEgB,IAAK,EACLhB,QAAS,yBAEX,CACEiB,IAAK,EACLjB,QAAS,qCAKb,kBAAC,IAAMkB,SAAP,OAGF,kBAAC,IAAKd,KAAS3B,EACb,kBAAC,IAAD,CAAQ0C,KAAK,UAAUC,SAAS,UAAhC","file":"static/js/10.690b37bb.chunk.js","sourcesContent":["import React from \"react\";\nimport {Form, Input, Button, message} from 'antd';\nimport styled from 'styled-components';\nimport {useStores} from \"../stores\";\nimport {useHistory } from 'react-router-dom';\n\n\nconst Wrapper = styled.div`\n  max-width: 600px;\n  margin: 20px auto;\n  box-shadow: 0 2px 2px rgba(0,0,0,0.2);\n  border: 1px solid rgba(230,230,230);\n`\nconst FormWrapper = styled.div`\n  padding: 30px 20px;\n`\nconst Title = styled.h1`\n  text-align: center;\n  margin-top: 30px;\n`\nconst layout = {\n  labelCol: {span: 6},\n  wrapperCol: {span: 16},\n};\nconst tailLayout = {\n  wrapperCol: {offset: 6, span: 16},\n};\nconst Login = () => {\n  const {AuthStore}=useStores()\n  let history = useHistory();\n  const onFinish = values => {\n    AuthStore.setUsername(values.username)\n    AuthStore.setPassword(values.password)\n    AuthStore.login()\n      .then(()=>{\n        console.log('登录成功')\n        history.push(\"/\")\n      }).catch((e)=>{\n        console.log(e)\n      message.error('登录失败，检查用户名，密码是否正确');\n    })\n  };\n\n  const onFinishFailed = errorInfo => {\n    console.log('Failed:', errorInfo);\n  };\n  const validateUserName = (rule, value) => {\n    if (/\\W/.test(value)) return Promise.reject('只能是数字、字母、下划线')\n    if (value.length < 4 || value.length > 10) return Promise.reject('长度为4-10个字符')\n    return Promise.resolve()\n  }\n  return (\n    <Wrapper>\n      <Title>登录</Title>\n      <FormWrapper>\n        <Form\n          {...layout}\n          name=\"basic\"\n          initialValues={{remember: true}}\n          onFinish={onFinish}\n          onFinishFailed={onFinishFailed}\n        >\n          <Form.Item\n            label=\"用户名\"\n            name=\"username\"\n            rules={\n              [\n                {required: true, message: '请输入用户名!'},\n                {validator: validateUserName}\n              ]\n            }\n          >\n            <Input/>\n          </Form.Item>\n\n          <Form.Item\n            label=\"密码\"\n            name=\"password\"\n            rules={[\n              {required: true, message: '请输入密码'},\n              {\n                min: 4,\n                message: '长度为4-8'\n              },\n              {\n                max: 8,\n                message: '最大长度为8'\n              }\n\n            ]}\n          >\n            <Input.Password/>\n          </Form.Item>\n\n          <Form.Item {...tailLayout}>\n            <Button type=\"primary\" htmlType=\"submit\">\n              提交\n            </Button>\n          </Form.Item>\n        </Form>\n      </FormWrapper>\n    </Wrapper>\n  );\n}\nexport default Login"],"sourceRoot":""}